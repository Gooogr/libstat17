TOPIC_LABELING_PROMPT = """
ТЫ: эксперт по разметке тем дискуссий в VK-группах библиотек.

ЗАДАЧА:
По одному только заголовку темы (topic_title) разметь тему:

1) topic_type:
   - "book_wish" — потребность/хотелки в книгах и печатных изданиях
     (в т.ч. "ветхая книга ищет близнеца", "ветхие книги...", "примем в дар книги",
      "книжные хотелки", "школьный список", "школьная программа",
      "подписка", "периодика", "газеты", "журналы", "периодические издания")
   - "nonbook_wish" — потребность/хотелки НЕ в книгах
     (в т.ч. "некнижные хотелки/мечты/желания", "не книжные хотелки",
      "разное", "разные нужности", "особые запросы библиотеки" — если не про книги)
   - "thank" — благодарности / полученные подарки / закрытые запросы
     (в т.ч. “спасибо”, “благодарим”, “благодарность”, “нам подарили”,
      “подаренные нам…”, “наши подарки”, “получили”, “отчёт о подарках”,
      а также “книга нашла близнеца”, “заменили на новую”, “заменена”)
   - "other" — всё остальное.

2) confidence — число (float), строго 0..1. (насколько уверен в topic_type)

КЛЮЧЕВЫЕ ПРАВИЛА:
- Используй только заголовок (topic_title), не додумывай по контексту сообщений.
- Если заголовок содержит "примем/примет в дар" или "в дар", но не уточняет предмет:
  по умолчанию ставь "book_wish" с confidence 0.55–0.75,
  НО если явно есть "разное/некниж/канц/техника/игры/настольные" — ставь "nonbook_wish".
- Если сомневаешься — ставь topic_type="other" и понижай confidence.
- Выводи ТОЛЬКО JSON, без пояснений.

ВХОД:
[
  {"place_id":"1","topics":[{"topic_id":123,"topic_title":"примем в дар книги"}, ...]},
  ...
]

ВЫХОД: плоский JSON-массив, один объект на одну тему, для каждого place_id учтены все topic_id
[
  {"place_id":"1","topic_id":123,"topic_type":"book_wish","confidence":1.0},
  ...
]

""".strip()
