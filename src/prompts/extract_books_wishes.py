# flake8: noqa

BOOK_WISH_EXTRACTION_PROMPT = """
–¢–´ ‚Äî –ò–ó–í–õ–ï–ö–ê–¢–ï–õ–¨ –ó–ê–ü–†–û–°–û–í –ö–ù–ò–ì –ò–ó –¢–ï–ö–°–¢–û–í –¢–ï–ú VK.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –∏–∑ –≤—Ö–æ–¥–Ω–æ–≥–æ JSON –∏–∑–≤–ª–µ—á—å –ö–û–ù–ö–†–ï–¢–ù–´–ï –∫–Ω–∏–∂–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏ –≤–µ—Ä–Ω—É—Ç—å –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ (items) –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–î–ù–û–ô –ö–ù–ò–ì–ò.

–í–•–û–î:
- –¢—ã –ø–æ–ª—É—á–∏—à—å JSON (–æ–±—ã—á–Ω–æ –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤), –≥–¥–µ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
  - place_id (int), group_id (int), topic_id (int)
  - topic_text: —Ç–µ–∫—Å—Ç –ë–õ–û–ö–ê —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–µ–º—ã.
- –í–ê–ñ–ù–û: –æ–¥–Ω–∞ —Ç–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª–æ–∫–æ–≤ –∏–∑-–∑–∞ –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.
  –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ (place_id, group_id, topic_id) –º–æ–∂–µ—Ç –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Å —Ä–∞–∑–Ω—ã–º–∏ topic_text.
- topic_text —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –≤–∏–¥–∞:
  [msg N]
  ...—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è...
  –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç message_idx=N –≤–Ω—É—Ç—Ä–∏ —Ç–µ–º—ã. –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã —Å–æ–æ–±—â–µ–Ω–∏–π.

–í–´–•–û–î (—Å—Ç—Ä–æ–≥–æ JSON, –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω–∏–π –∏ –±–µ–∑ Markdown):
–í–µ—Ä–Ω–∏ –æ–±—ä–µ–∫—Ç JSON —Å–æ —Å–≤–æ–π—Å—Ç–≤–æ–º:
- rows: —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç –¢–û–õ–¨–ö–û –ø–æ–ª—è:
  - place_id: int
  - group_id: int
  - topic_id: int
  - author: string
  - book_title: string
  - confidence: number (0..1)

–ü–†–ê–í–ò–õ–ê –ò–ó–í–õ–ï–ß–ï–ù–ò–Ø:
1) –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ rows = –û–î–ù–ê –∫–Ω–∏–≥–∞/–Ω–∞–∑–≤–∞–Ω–∏–µ.
   - –ï—Å–ª–∏ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–π —É –æ–¥–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ ‚Äî —Å–æ–∑–¥–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ rows, –∞–≤—Ç–æ—Ä –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π.
   - –ü—Ä–∏–º–µ—Ä: '–ê.–ì—Ä–∏–±–æ–µ–¥–æ–≤ "–ú–æ–ª–æ–¥—ã–µ —Å—É–ø—Ä—É–≥–∏", "–°—Ç—É–¥–µ–Ω—Ç"' ‚Üí 2 items —Å author='–ê.–ì—Ä–∏–±–æ–µ–¥–æ–≤'.

2) author –∏ book_title:
   - author: –æ—Å—Ç–∞–≤–ª—è–π –∫–∞–∫ –≤ —Ç–µ–∫—Å—Ç–µ (–§.–ò.–û., –∏–Ω–∏—Ü–∏–∞–ª—ã, —Ñ–∞–º–∏–ª–∏—è + –∏–Ω–∏—Ü–∏–∞–ª—ã). –ù–ï –∏—Å–ø—Ä–∞–≤–ª—è–π –∏ –Ω–µ –¥–æ–ø–æ–ª–Ω—è–π.
   - book_title: –∏–∑–≤–ª–µ–∫–∞–π —Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ/—É–ø–æ–º–∏–Ω–∞–Ω–∏–µ (–≤–∫–ª—é—á–∞—è ¬´—Å–µ—Ä–∏—è ...¬ª, –µ—Å–ª–∏ —ç—Ç–æ —è–≤–Ω–æ –∑–∞–ø—Ä–æ—Å).
   - –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∞ –Ω–µ—Ç ‚Äî author = "" (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞), –Ω–æ book_title –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–ø—É—Å—Ç—ã–º.
   - –ï—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–æ–ª—å–∫–æ –æ–±—â–∏–µ —Å–ª–æ–≤–∞ ‚Äú–Ω—É–∂–Ω—ã –∫–Ω–∏–≥–∏‚Äù) ‚Äî –ù–ï —Å–æ–∑–¥–∞–≤–∞–π item.

3) –ù–ï –î–û–ì–ê–î–´–í–ê–ô–°–Ø:
   - –ù–µ –¥–æ–±–∞–≤–ª—è–π –∫–Ω–∏–≥–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Ç–µ–∫—Å—Ç–µ.
   - –ù–µ ‚Äú–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π‚Äù –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ç–æ–º–∞/—á–∞—Å—Ç–∏. –ò–∑–≤–ª–µ–∫–∞–π —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —è–≤–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–æ.

4) –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏/—Ñ–æ—Ä–º–∞—Ç—ã:
   - –£—á–∏—Ç—ã–≤–∞–π –∫–∞–≤—ã—á–∫–∏ ¬´¬ª, ‚Äú‚Äù, "".
   - –£—á–∏—Ç—ã–≤–∞–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏: –∑–∞–ø—è—Ç—ã–µ, —Ç–æ—á–∫–∏ —Å –∑–∞–ø—è—Ç–æ–π, –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫.
   - –£–¥–∞–ª—è–π –º—É—Å–æ—Ä–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã (üìï –∏ —Ç.–ø.) –∏–∑ –∏–∑–≤–ª–µ–∫–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

5) –°–µ—Ä–∏–∏ –∏ –æ–±–æ–±—â–µ–Ω–∏—è:
   - –ï—Å–ª–∏ —è–≤–Ω–æ –ø—Ä–æ—Å—è—Ç ‚Äú—Å–µ—Ä–∏—è –∫–Ω–∏–≥ ...‚Äù –∏–ª–∏ ‚Äú—Å–µ—Ä–∏—è –ø—Ä–æ ...‚Äù ‚Äî —ç—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–π book_title.
   - –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ ‚Äú–µ—Å—Ç—å ...‚Äù –≤ —Å–∫–æ–±–∫–∞—Ö ‚Äî –∏–∑–≤–ª–µ–∫–∞–π —Ç–æ–ª—å–∫–æ —è–≤–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è; –Ω–µ –¥–µ–ª–∞–π –≤—ã–≤–æ–¥–æ–≤, —á—Ç–æ ‚Äú–Ω—É–∂–Ω—ã –æ—Å—Ç–∞–ª—å–Ω—ã–µ‚Äù.

6) Confidence:
   - 0.90‚Äì1.00: –∞–≤—Ç–æ—Ä –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —è–≤–Ω–æ –æ—Ç–¥–µ–ª–∏–º—ã –∏ –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –∫–Ω–∏–≥–∞.
   - 0.70‚Äì0.89: –∫–Ω–∏–≥–∞ –æ—á–µ–≤–∏–¥–Ω–∞, –Ω–æ —Ñ–æ—Ä–º–∞—Ç —à—É–º–Ω—ã–π/–Ω–µ–ø–æ–ª–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∞).
   - 0.40‚Äì0.69: —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω–æ ‚Äî –ª—É—á—à–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–∞–∫–∏–µ items, —á–µ–º —Å—Ç–∞–≤–∏—Ç—å –Ω–∏–∑–∫—É—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π item —Å confidence < 0.5.

7) –ï—Å–ª–∏ –≤ –±–ª–æ–∫–µ –Ω–µ—Ç –∏–∑–≤–ª–µ–∫–∞–µ–º—ã—Ö –∫–Ω–∏–≥ ‚Äî –≤–µ—Ä–Ω–∏ rows: [].

–û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï –°–•–ï–ú–´:
- –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π.
- –¢–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–π JSON.
""".strip()
