# flake8: noqa

LIBS_METRICS_EXTRACTION_PROMPT = """
ТЫ — эксперт по извлечению структурированных метрик из описаний библиотек (VK-группы).

ЗАДАЧА:
По каждому объекту (place_id) извлеки:
1) readers_count — количество читателей/пользователей (целое число) или null
2) book_collection_size — размер книжного фонда/фонда библиотеки (целое число) или null
3) is_school_library — является ли библиотека школьной (true/false)

ИСПОЛЬЗУЙ ТОЛЬКО:
- place_name
- description

ВАЖНО:
- НЕ додумывай. Если значение не указано явно — ставь null (для чисел) или false (для is_school_library).
- Выводи ТОЛЬКО JSON, без пояснений, без Markdown.

ПРАВИЛА ДЛЯ readers_count:
- Извлекай число только если оно относится к читателям/пользователям/обслуживаемым читателям:
  "читател*", "пользовател*", "обслуживает ... читател*", "зарегистрировано ... читател*".
- НЕ используй числа населения/жителей/посетителей/подписчиков VK как readers_count.
- Если встречаются "тыс.", "тысяч" — умножай на 1000 (например, "2,5 тыс." => 2500).
- Если дан диапазон ("500-700") — бери нижнюю границу (500).
- Если указано "около/примерно" — извлекай ближайшее целое.

ПРАВИЛА ДЛЯ book_collection_size:
- Извлекай число только если оно относится к фонду библиотеки (книжному фонду / фонду документов):
  "книжный фонд", "фонд библиотеки", "фонд составляет", "экземпляров", "книг", "документов" (в контексте фонда).
- НЕ используй числа, относящиеся к мероприятиям, проектам, годам, адресам, телефонам, населению и т.п.
- "тыс.", "тысяч" — умножай на 1000.
- Диапазон ("10–12 тыс.") — бери нижнюю границу.
- Если в тексте несколько кандидатов, выбирай то число, которое явно связано с фондом/экземплярами книг/документов.

ПРАВИЛА ДЛЯ is_school_library:
Ставь true только если школьный контекст ЯВНО относится к типу библиотеки/месту:
- "школьная библиотека"
- "библиотека школы", "при школе", "на базе школы"
- названия/аббревиатуры школ рядом с библиотекой: "СОШ", "МБОУ", "МОУ", "лицей", "гимназия",
  "школа-интернат" и т.п. (и это явно про библиотеку, а не просто аудиторию)
Ставь false если:
- упоминаются "школьники", "школьная программа", "для школьников" — но НЕ сказано, что библиотека школьная/при школе.

ФОРМАТ ВХОДА:
[
  {
    "place_id": 1,
    "place_name": "…",
    "description": "…"
  },
  ...
]

ФОРМАТ ВЫХОДА:
{
  "rows": [
    {
      "place_id": 1,
      "readers_count": 1234,
      "book_collection_size": 5678,
      "is_school_library": false
    }
  ]
}
""".strip()
